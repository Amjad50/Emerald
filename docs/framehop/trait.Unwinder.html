<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Unwinder is the trait that each CPU architecture’s concrete unwinder type implements. This trait’s methods are what let you do the actual unwinding."><title>Unwinder in framehop - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-4e54bb2b497cc83f.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="framehop" data-themes="" data-resource-suffix="" data-rustdoc-version="1.77.0-nightly (139fb2214 2024-01-03)" data-channel="nightly" data-search-js="search-c17e98913a53b3b7.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-0b2e2def73e61cbe.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../framehop/index.html">framehop</a><span class="version">0.11.2</span></h2></div><h2 class="location"><a href="#">Unwinder</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Cache">Cache</a></li><li><a href="#associatedtype.Module">Module</a></li><li><a href="#associatedtype.UnwindRegs">UnwindRegs</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.add_module">add_module</a></li><li><a href="#tymethod.max_known_code_address">max_known_code_address</a></li><li><a href="#tymethod.remove_module">remove_module</a></li><li><a href="#tymethod.unwind_frame">unwind_frame</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.iter_frames">iter_frames</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate framehop</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../framehop/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">framehop</a>::<wbr><a class="trait" href="#">Unwinder</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/framehop/unwinder.rs.html#30-88">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait Unwinder: <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> {
    type <a href="#associatedtype.UnwindRegs" class="associatedtype">UnwindRegs</a>;
    type <a href="#associatedtype.Cache" class="associatedtype">Cache</a>;
    type <a href="#associatedtype.Module" class="associatedtype">Module</a>;

    // Required methods
    fn <a href="#tymethod.add_module" class="fn">add_module</a>(&amp;mut self, module: Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.Module" title="type framehop::Unwinder::Module">Module</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.remove_module" class="fn">remove_module</a>(&amp;mut self, module_avma_range_start: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.max_known_code_address" class="fn">max_known_code_address</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.unwind_frame" class="fn">unwind_frame</a>&lt;F&gt;(
        &amp;self,
        address: <a class="enum" href="enum.FrameAddress.html" title="enum framehop::FrameAddress">FrameAddress</a>,
        regs: &amp;mut Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.UnwindRegs" title="type framehop::Unwinder::UnwindRegs">UnwindRegs</a>,
        cache: &amp;mut Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.Cache" title="type framehop::Unwinder::Cache">Cache</a>,
        read_stack: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.reference.html">&amp;mut F</a>
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>&gt;, <a class="enum" href="enum.Error.html" title="enum framehop::Error">Error</a>&gt;
       <span class="where">where F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.unit.html">()</a>&gt;</span>;

    // Provided method
    fn <a href="#method.iter_frames" class="fn">iter_frames</a>&lt;'u, 'c, 'r, F&gt;(
        &amp;'u self,
        pc: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>,
        regs: Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.UnwindRegs" title="type framehop::Unwinder::UnwindRegs">UnwindRegs</a>,
        cache: &amp;'c mut Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.Cache" title="type framehop::Unwinder::Cache">Cache</a>,
        read_stack: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.reference.html">&amp;'r mut F</a>
    ) -&gt; <a class="struct" href="struct.UnwindIterator.html" title="struct framehop::UnwindIterator">UnwindIterator</a>&lt;'u, 'c, 'r, Self, F&gt;
       <span class="where">where F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.unit.html">()</a>&gt;</span> { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Unwinder is the trait that each CPU architecture’s concrete unwinder type implements.
This trait’s methods are what let you do the actual unwinding.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.UnwindRegs" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#32">source</a><h4 class="code-header">type <a href="#associatedtype.UnwindRegs" class="associatedtype">UnwindRegs</a></h4></section></summary><div class="docblock"><p>The unwind registers type for the targeted CPU architecture.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Cache" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#38">source</a><h4 class="code-header">type <a href="#associatedtype.Cache" class="associatedtype">Cache</a></h4></section></summary><div class="docblock"><p>The unwind cache for the targeted CPU architecture.
This is an associated type because the cache stores unwind rules, whose concrete
type depends on the CPU arch, and because the cache can support different allocation
policies.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.Module" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#42">source</a><h4 class="code-header">type <a href="#associatedtype.Module" class="associatedtype">Module</a></h4></section></summary><div class="docblock"><p>The module type. This is an associated type because the concrete type varies
depending on the type you use to give the module access to the unwind section data.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.add_module" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#48">source</a><h4 class="code-header">fn <a href="#tymethod.add_module" class="fn">add_module</a>(&amp;mut self, module: Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.Module" title="type framehop::Unwinder::Module">Module</a>)</h4></section></summary><div class="docblock"><p>Add a module that’s loaded in the profiled process. This is how you provide unwind
information and address ranges.</p>
<p>This should be called whenever a new module is loaded into the process.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.remove_module" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#53">source</a><h4 class="code-header">fn <a href="#tymethod.remove_module" class="fn">remove_module</a>(&amp;mut self, module_avma_range_start: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>)</h4></section></summary><div class="docblock"><p>Remove a module that was added before using <code>add_module</code>, keyed by the start
address of that module’s address range. If no match is found, the call is ignored.
This should be called whenever a module is unloaded from the process.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.max_known_code_address" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#61">source</a><h4 class="code-header">fn <a href="#tymethod.max_known_code_address" class="fn">max_known_code_address</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a></h4></section></summary><div class="docblock"><p>Returns the highest code address that is known in this process based on the module
address ranges. Returns 0 if no modules have been added.</p>
<p>This method can be used together with
<a href="aarch64/struct.PtrAuthMask.html#method.from_max_known_address" title="associated function framehop::aarch64::PtrAuthMask::from_max_known_address"><code>PtrAuthMask::from_max_known_address</code></a>
to make an educated guess at a pointer authentication mask for Aarch64 return addresses.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.unwind_frame" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#65-73">source</a><h4 class="code-header">fn <a href="#tymethod.unwind_frame" class="fn">unwind_frame</a>&lt;F&gt;(
    &amp;self,
    address: <a class="enum" href="enum.FrameAddress.html" title="enum framehop::FrameAddress">FrameAddress</a>,
    regs: &amp;mut Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.UnwindRegs" title="type framehop::Unwinder::UnwindRegs">UnwindRegs</a>,
    cache: &amp;mut Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.Cache" title="type framehop::Unwinder::Cache">Cache</a>,
    read_stack: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.reference.html">&amp;mut F</a>
) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>&gt;, <a class="enum" href="enum.Error.html" title="enum framehop::Error">Error</a>&gt;<div class="where">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.unit.html">()</a>&gt;,</div></h4></section></summary><div class="docblock"><p>Unwind a single frame, to recover return address and caller register values.
This is the main entry point for unwinding.</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.iter_frames" class="method"><a class="src rightside" href="../src/framehop/unwinder.rs.html#76-87">source</a><h4 class="code-header">fn <a href="#method.iter_frames" class="fn">iter_frames</a>&lt;'u, 'c, 'r, F&gt;(
    &amp;'u self,
    pc: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>,
    regs: Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.UnwindRegs" title="type framehop::Unwinder::UnwindRegs">UnwindRegs</a>,
    cache: &amp;'c mut Self::<a class="associatedtype" href="trait.Unwinder.html#associatedtype.Cache" title="type framehop::Unwinder::Cache">Cache</a>,
    read_stack: <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.reference.html">&amp;'r mut F</a>
) -&gt; <a class="struct" href="struct.UnwindIterator.html" title="struct framehop::UnwindIterator">UnwindIterator</a>&lt;'u, 'c, 'r, Self, F&gt;<div class="where">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u64.html">u64</a>, <a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.unit.html">()</a>&gt;,</div></h4></section></summary><div class="docblock"><p>Return an iterator that unwinds frame by frame until the end of the stack is found.</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-Unwinder-for-UnwinderAarch64%3CD,+P%3E" class="impl"><a class="src rightside" href="../src/framehop/aarch64/unwinder.rs.html#37-66">source</a><a href="#impl-Unwinder-for-UnwinderAarch64%3CD,+P%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&lt;Target = [<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>]&gt;, P: <a class="trait" href="trait.AllocationPolicy.html" title="trait framehop::AllocationPolicy">AllocationPolicy</a>&gt; <a class="trait" href="trait.Unwinder.html" title="trait framehop::Unwinder">Unwinder</a> for <a class="struct" href="aarch64/struct.UnwinderAarch64.html" title="struct framehop::aarch64::UnwinderAarch64">UnwinderAarch64</a>&lt;D, P&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.UnwindRegs-1" class="associatedtype trait-impl"><a href="#associatedtype.UnwindRegs-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.UnwindRegs" class="associatedtype">UnwindRegs</a> = <a class="struct" href="aarch64/struct.UnwindRegsAarch64.html" title="struct framehop::aarch64::UnwindRegsAarch64">UnwindRegsAarch64</a></h4></section><section id="associatedtype.Cache-1" class="associatedtype trait-impl"><a href="#associatedtype.Cache-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Cache" class="associatedtype">Cache</a> = <a class="struct" href="aarch64/struct.CacheAarch64.html" title="struct framehop::aarch64::CacheAarch64">CacheAarch64</a>&lt;P&gt;</h4></section><section id="associatedtype.Module-1" class="associatedtype trait-impl"><a href="#associatedtype.Module-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Module" class="associatedtype">Module</a> = <a class="struct" href="struct.Module.html" title="struct framehop::Module">Module</a>&lt;D&gt;</h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Unwinder-for-UnwinderX86_64%3CD,+P%3E" class="impl"><a class="src rightside" href="../src/framehop/x86_64/unwinder.rs.html#39-68">source</a><a href="#impl-Unwinder-for-UnwinderX86_64%3CD,+P%3E" class="anchor">§</a><h3 class="code-header">impl&lt;D: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&lt;Target = [<a class="primitive" href="https://doc.rust-lang.org/nightly/core/primitive.u8.html">u8</a>]&gt;, P: <a class="trait" href="trait.AllocationPolicy.html" title="trait framehop::AllocationPolicy">AllocationPolicy</a>&gt; <a class="trait" href="trait.Unwinder.html" title="trait framehop::Unwinder">Unwinder</a> for <a class="struct" href="x86_64/struct.UnwinderX86_64.html" title="struct framehop::x86_64::UnwinderX86_64">UnwinderX86_64</a>&lt;D, P&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.UnwindRegs-2" class="associatedtype trait-impl"><a href="#associatedtype.UnwindRegs-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.UnwindRegs" class="associatedtype">UnwindRegs</a> = <a class="struct" href="x86_64/struct.UnwindRegsX86_64.html" title="struct framehop::x86_64::UnwindRegsX86_64">UnwindRegsX86_64</a></h4></section><section id="associatedtype.Cache-2" class="associatedtype trait-impl"><a href="#associatedtype.Cache-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Cache" class="associatedtype">Cache</a> = <a class="struct" href="x86_64/struct.CacheX86_64.html" title="struct framehop::x86_64::CacheX86_64">CacheX86_64</a>&lt;P&gt;</h4></section><section id="associatedtype.Module-2" class="associatedtype trait-impl"><a href="#associatedtype.Module-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Module" class="associatedtype">Module</a> = <a class="struct" href="struct.Module.html" title="struct framehop::Module">Module</a>&lt;D&gt;</h4></section></div></details></div><script src="../trait.impl/framehop/unwinder/trait.Unwinder.js" async></script></section></div></main></body></html>